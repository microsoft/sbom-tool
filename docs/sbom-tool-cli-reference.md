# SBOM Tool CLI Reference

## Installation

The SBOM tool CLI is distributed through [GitHub Releases](https://github.com/microsoft/sbom-tool/releases). The tool is packaged as a single platform-dependent executable file. In order to get the tool for your platform, go to the [latest](https://github.com/microsoft/sbom-tool/releases/latest) or specific version of the release, then download the executable for your platform. You can also download the SBOM for each of the binary for verification.

| Platform | Binary filename           | SBOM filename                    |
|----------|-----------------------|------------------------------|
| Windows  | sbom-tool-win-x64.exe | win-x64-manifest.spdx.json   |
| Linux    | sbom-tool-linux-x64   | linux-x64-manifest.spdx.json |
| MacOS    | sbom-tool-osx-x64     | osx-x64-manifest.spdx.json   |


## Running the tool

Imagine you have a `dotnet` project that you are building the SBOM for. Lets also imagine the source for the project lives in `c:\Users\test\TestProject`.

You may first build the above project by running the following command, it should build the project and place all the binaries in the `c:\outputDrop` folder.

```
dotnet build --output c:\outputDrop
```

Now, you will generate the SBOM for the above project by running the tool you just downloaded.

```
./sbom-tool-win-x64.exe generate -b c:\outputDrop -bc c:\Users\test\TestProject -pn TestProject -pv 1.0.0 -nsb http://mycompany.com
```

Here, you configured the tool to generte an SBOM for all the files in the `c:\outputDrop` folder, the `c:\Users\test\TestProject` path will be searched for *.csproj or packages.config files to get a list of dependency packages that will be added to the SBOM. The package name and version were configured using the -pn and -pv parameter, and the -nsb parameter specifices the namespace base uri which will be used to generate the document namespace in the final SPDX 2.2 SBOM.

The generated SBOM will be placed in the path specified by the -b argument inside a `_manifest\spdx_2.2\` folder. So, in our case the SBOM will be located here: `c:\outputDrop\_manifest\spdx_2.2\manifest.spdx.json`

The above is the most minimal set of parameters you can provide to generate the SBOM. A full list of arguments can be found in [here](sbom-tool-arguments.md).

## Common scenarios where you can provide additional parameters

### Place the generated SBOM in a seperate folder

By default the generated SBOM will be placed in a newly created folder called `_manifest` inside the BuildDropPath (-b), but in case you want to place the SBOM in a different path, you can specify the `ManifestDirPath -m` parameter like so.

```
./sbom-tool-win-x64.exe generate -b c:\outputDrop -bc c:\Users\test\TestProject -pn TestProject -pv 1.0.0 -nsb http://mycompany.com -m c:\sboms
```

This will cause the SBOM tool to generate the SBOM inside the `c:\sboms` folder. A new `_manifest\spdx_2.2` folder will be created and the SBOM will be stored here. So, the SBOM can be found at the path `c:\sboms\_manifest\spdx_2.2\manifest.spdx.json`.

> Please note that the `_manifest` folder will be generated by the SBOM tool inside the ManifestDirPath folder, you don't have to provide a folder path that ends in `_manifest` for this parameter. 

### Get verbose logging

You can specify verbose logging just by specifying the -V parameter, like so

```
./sbom-tool-win-x64.exe generate -b c:\outputDrop -bc c:\Users\test\TestProject -pn TestProject -pv 1.0.0 -nsb http://mycompany.com -V Verbose
```

### Scan docker images for dependency packages

We can scan docker images to scan them for dependency packages. Say for our example, we also wanted to gather dependencies from the docker image `testImage:0.0.1`, we would run the following command


```
./sbom-tool-win-x64.exe generate -b c:\outputDrop -bc c:\Users\test\TestProject -pn TestProject -pv 1.0.0 -nsb http://mycompany.com -di testImage:0.0.1
```

Say, in addition to the test image, we also want to gather all dependencies in our build machine which say is `ubuntu:1.9`, we can specify multiple image arguments for this parameter by seperating them with a comma.

```
./sbom-tool-win-x64.exe generate -b c:\outputDrop -bc c:\Users\test\TestProject -pn TestProject -pv 1.0.0 -nsb http://mycompany.com -di testImage:0.0.1,ubuntu:1.9
```

### Write telemetry to a file

By default, we just log telemetry to the console output. In order to get the telemetry logged to a file, specify the `-t` parameter 

```
./sbom-tool-win-x64.exe generate -b c:\outputDrop -bc c:\Users\test\TestProject -pn TestProject -pv 1.0.0 -nsb http://mycompany.com -t c:\telemetry
```